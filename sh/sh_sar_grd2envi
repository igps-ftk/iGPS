#!/bin/sh

# Name:
#   sh_sar_grd2envi
#   

# Purpose:
#   

# Example:
#   

# Modifications:
#   

# Algorigthm:
#   

# Dependency:
#   

. ${HOME}/.bashrc

PROG=sh_sar_grd2envi

file=vel_mask_ll

cpath=`pwd` #current path

while [ "$1" != "" ]; do
  case $1 in
    -file)
      file=$2
      ;;
    *)
      echo "[$PROG]ERROR: invalid option ($1)!!"
      exit 1
      ;;
  esac
  shift 2
done

gmt grdconvert ${file}.grd -G_tmp.nc=cf
gdal_translate _tmp.nc _tmp.tif

#call idl to convert tiff into envi format
pwd
cmdstr="convert_tif2envi,\"${cpath}/_tmp.tif\",\"${cpath}/${file}\""
echo "cmdstr is $cmdstr"
idl -e $cmdstr
#idl -e "convert_tif2envi,'/g8g/gsar/tmp/test.grd2envi/_tmp.tif','/g8g/gsar/tmp/test.grd2envi/test'"
#idl -e "convert_tif2envi.pro" "/g8g/gsar/tmp/test.grd2envi/_tmp.tif" "/g8g/gsar/tmp/test.grd2envi/test"
#idl -e "convert_tif2envi,'_tmp.tif','test'"
