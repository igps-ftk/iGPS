#!/bin/sh

# Name:
#   sh_grd_resample
#   

# Purpose:
#   

# Example:
#   

# Modifications:
#   

# Algorigthm:
#   

# Dependency:
#   

files=`ls disp_*_ll.nc`

file=`ls disp_*.nc | head -1`

sf=10
sf=4

#output directory
mkdir -p r${sf}

#current pixel size
psz_xx=`grdinfo -C $file | awk '{print $8}'`
psz_yy=`grdinfo -C $file | awk '{print $9}'`

echo $psz_xx $psz_yy

out_psz_xx=`echo $psz_xx $sf | awk '{print $1*$2}'`
out_psz_yy=`echo $psz_yy $sf | awk '{print $1*$2}'`

echo $out_psz_xx $out_psz_yy

for file in $files; do
    bname=`basename $file`
    fname="${bname%.*}"

    echo grdsample $file -I${out_psz_xx}/${out_psz_yy} -Gr${sf}/${fname}_r${sf}.nc=cf
    echo grdsample $file -I${out_psz_xx}/${out_psz_yy} -Gr${sf}/${fname}_r${sf}.nc=cf  | sh

done
