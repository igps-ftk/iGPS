#!/bin/sh

ids=`grep '^ ' ../ids`
#ids='18'
#ids="19 20"




if [ 1 -eq 2 ]; then
file='./slurm.conf'
for id in $ids; do
  echo rsync -avP /etc/slurm  node${id}:/etc/
  echo rsync -avP /etc/slurm  node${id}:/etc/ | sh

  echo rsync -avP /usr/local/slurm  node${id}:/usr/local/
  echo rsync -avP /usr/local/slurm  node${id}:/usr/local/ | sh



done
fi

#exit

if [ 1 -eq 1 ]; then
file='./slurm.conf'
for id in $ids; do
  echo scp ./$file node${id}:/usr/local/slurm/etc/
  echo scp ./$file node${id}:/usr/local/slurm/etc/ | sh
done
fi


if [ 1 -eq 2 ]; then
file='etc/slurm.tar.gz'
for id in $ids; do
  echo scp ./$file node${id}:/etc/
  echo scp ./$file node${id}:/etc/ | sh
  #exit
done
fi

if [ 1 -eq 2 ]; then
  file='slurmd.service'
  for id in $ids; do
    echo scp ./$file node${id}:/usr/lib/systemd/system/
    echo scp ./$file node${id}:/usr/lib/systemd/system/ | sh
  done
fi

if [ 1 -eq 2 ]; then
  file='slurmctld.service'
  for id in $ids; do
    echo scp ./$file node${id}:/usr/lib/systemd/system/
    echo scp ./$file node${id}:/usr/lib/systemd/system/ | sh
  done
fi

