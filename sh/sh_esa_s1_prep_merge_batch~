#!/bin/sh

# Name:
#   sh_esa_s1_prep_merge_batch
#   

# Purpose:
#   

# Example:
#   

# Modifications:
#   

# Algorigthm:
#   

# Dependency:
#   

orbtype=des
path=`pwd`/../

while [ "$1" != "" ]; do
    case $1 in
	-orbtype)
	    orbtype=$2
	    ;;
	-path)
	   oldpath=`pwd`
	   cd $2
	    path=`pwd`
	    cd $oldpath
	    ;;
	*)
	    echo "[]ERROR: wrong input $1"
	    echo "Usage: sh_esa_s1_prep_merge_batch"
	    echo "  inputs:"
	    echo "    1) ../asc_F1/intf_all/ or ../asc_F2/intf_all"
	    echo "    2) *F2*"
	    echo "    3) *F3*"
	    echo "(c)Copyright 2017 by Yunfeng Tian (tianyf@gmail.com)"
	    ;;
	esac
    shift 2
done

dirs=`find ../${orbtype}_F1/intf_all -maxdepth 1 -type d -name "20?????_20?????"|sort`
for dir in $dirs; do
    #echo $dir
    file_prms=`find  ${dir}/ -name "S1*.PRM"|sort`
    tmp=`echo $file_prms | awk '{print $1}'`
    file_prm1=`basename $tmp`
    tmp=`echo $file_prms | awk '{print $2}'`
    file_prm2=`basename $tmp`
    #echo $file_prms
    line_f1="${dir}/:${file_prm1}:${file_prm2}"
    line_f2=`echo $line_f1 | sed -e 's/F1/F2/g'`
    line_f3=`echo $line_f1 | sed -e 's/F1/F3/g'`
    echo $line_f1,$line_f2,$line_f3
done

